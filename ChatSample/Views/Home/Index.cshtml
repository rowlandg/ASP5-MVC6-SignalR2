<strong>Chat Example</strong>

<script src="~/jquery-1.9.1.min.js"></script>
<script src="/jquery.signalR-2.2.0.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="/signalr/hubs"></script>

<div id="chatLog">
    <p>    Welcome to the chat!</p>

</div>

<p>
    <input id="nickName" type="text" value="Stefan" />
    <input id="message" type="text"/>

    <input id="sendText" type="button" value="Send" disabled="disabled" onClick="sendText()"/>
</p>

<script language="javascript">
    var hub = null;

    $(function () {
        hub = $.connection.chat;
        $("#chatLog").append("Connecting...<br>");

        hub.client.ReceiveText = function(nick, msg)
        {
            $("#chatLog").append("(" + nick + ") " + msg + "<br>");
        }
 
        $.connection.hub.start().done(function () {
            // Callback for established connection
            $("#sendText").removeAttr("disabled");
            $("#chatLog").append("Connected<br>");
        });
    });


    function sendText() {
        var nickName = $("#nickName").val();
        var message = $("#message").val();

        console.log(hub.client);

        hub.server.sendText(nickName, message);
    }

</script>
